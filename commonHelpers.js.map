{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["export function photoTemplate(obj) {\n  return `<div class=\"gallery-item\">\n  <a href=\"${obj.largeImageURL}\">\n    <img src=\"${obj.webformatURL}\" alt=\"${obj.tags}\" loading=\"lazy\"/>\n  </a>\n  <ul class=\"block-info\">\n    <li>\n      <p class=\"title\">Likes</p>\n      <p class=\"text\">${obj.likes}</p>\n    </li>\n\n    <li>\n      <p class=\"title\">Views</p>\n      <p class=\"text\">${obj.views}</p>\n    </li>\n\n    <li>\n      <p class=\"title\">Comments</p>\n      <p class=\"text\">${obj.comments}</p>\n    </li>\n\n    <li>\n      <p class=\"title\">Downloads</p>\n      <p class=\"text\">${obj.downloads}</p>\n    </li>\n  </ul>\n</div>`;\n}\n\nexport function photosTemplate(arr) {\n  return arr.map(photoTemplate).join('');\n}\n\nexport function renderPhotos(arr, gallery) {\n  const markup = photosTemplate(arr);\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import axios from 'axios';\n\nexport const userParams = {\n  query: '',\n  currentPage: 1,\n  maxPage: 1,\n  perPage: 15,\n};\n\nexport async function searchPhoto() {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const API_KEY = '44013925-160a3698223f11c3c7b6b04f2';\n\n  const url = BASE_URL + END_POINT;\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: userParams.query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page: userParams.currentPage,\n    lang: 'en',\n  });\n\n  const response = await axios.get(url, { params });\n  return response;\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","import {\n  photoTemplate,\n  photosTemplate,\n  renderPhotos,\n} from './js/render-functions';\n\nimport { searchPhoto } from './js/pixabay-api';\n\nimport axios from 'axios';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconError from './img/error.svg';\n\nimport { userParams } from './js/pixabay-api';\n\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n});\n\nconst galleryEl = document.querySelector('.js-gallery');\nconst formEl = document.querySelector('.js-form');\nconst btnLoadEl = document.querySelector('.js-load-btn');\nconst loaderEl = document.querySelector('.js-loader');\n\nformEl.addEventListener('submit', async evt => {\n  evt.preventDefault();\n  hideLoadMoreBtn();\n\n  galleryEl.innerHTML = '';\n  userParams.query = evt.target.elements.query.value.trim();\n  userParams.currentPage = 1;\n\n  if (!userParams.query) {\n    warningAlert('Please enter a search term.');\n    return;\n  }\n\n  loader.show();\n\n  try {\n    const photos = await searchPhoto(userParams.query);\n    renderPhotos(photos.data.hits, galleryEl);\n    lightbox.refresh();\n\n    userParams.maxPage = Math.ceil(photos.data.totalHits / userParams.perPage);\n    // userParams.maxPage = 3;\n\n    if (photos.data.hits.length === 0) {\n      warningAlert(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      evt.target.reset();\n      loader.hide();\n      return;\n    }\n  } catch (error) {\n    warningAlert('Server error');\n  }\n\n  loader.hide();\n\n  updateBtnStatus();\n  evt.target.reset();\n});\n\nbtnLoadEl.addEventListener('click', async () => {\n  hideLoadMoreBtn();\n  userParams.currentPage += 1;\n\n  loader.show();\n\n  try {\n    const photos = await searchPhoto(userParams.query);\n    renderPhotos(photos.data.hits, galleryEl);\n    lightbox.refresh();\n  } catch (error) {\n    warningAlert('Server error');\n  }\n\n  loader.hide();\n  updateBtnStatus();\n  scrollPage();\n});\n\n// Functions\n\nfunction hideLoadMoreBtn() {\n  btnLoadEl.classList.add('hidden');\n}\n\nfunction showLoadMoreBtn() {\n  btnLoadEl.classList.remove('hidden');\n}\n\nfunction updateBtnStatus() {\n  if (userParams.currentPage >= userParams.maxPage) {\n    hideLoadMoreBtn();\n    messageAlert(`You've reached the end of search results.`);\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction scrollPage() {\n  const divElem = galleryEl.firstElementChild;\n  const height = divElem.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: height * 4,\n    behavior: 'smooth',\n  });\n}\n\nconst loader = {\n  hide() {\n    loaderEl.classList.add('hidden');\n  },\n  show() {\n    loaderEl.classList.remove('hidden');\n  },\n};\n\nfunction warningAlert(message) {\n  iziToast.warning({\n    title: 'Warning',\n    titleColor: '#FAFAFB',\n    message: message,\n    messageColor: '#FAFAFB',\n    color: '#EF4040',\n    position: 'topRight',\n    timeout: 5000,\n    iconUrl: iconError,\n  });\n}\n\nfunction messageAlert(message) {\n  iziToast.info({\n    message: message,\n    messageColor: 'black',\n    color: 'yellow',\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n"],"names":["photoTemplate","obj","photosTemplate","arr","renderPhotos","gallery","markup","userParams","searchPhoto","BASE_URL","END_POINT","API_KEY","url","params","axios","iconError","lightbox","SimpleLightbox","galleryEl","formEl","btnLoadEl","loaderEl","evt","hideLoadMoreBtn","warningAlert","loader","photos","updateBtnStatus","scrollPage","showLoadMoreBtn","messageAlert","height","message","iziToast"],"mappings":"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"}